<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
    {% block head %}
        <title>
            {% block title %}
                Darf Vermieter das? | KI-gestützte Mietrechtsanalyse
            {% endblock %}
        </title>
        {% block meta %}
            <meta charset="utf-8"/>
            <meta name="viewport" content="width=device-width, initial-scale=1"/>
            <meta name="color-scheme" content="dark light"/>
            <meta name="description"
                  content="Darf Vermieter das? bietet eine KI-gestützte Analyse Ihrer Mietverträge an. So können Sie schnell und einfach überprüfen, ob Ihr Vermieter sich an die gesetzlichen Vorgaben hält."/>
            <meta name="keywords" content="Mietrecht, Analyse, KI, Mietvertrag, Klausel, Mieterrechte"/>
            <meta name="author" content="Josef Müller"/>
            <meta name="robots" content="index, follow"/>
        {% endblock %}
        <!-- TODO: favicon -->
        <link rel="icon" href="favicon.png"/>
        <!-- BunnyCDN font preconnect + font download -->
        <link rel="preconnect" href="https://fonts.bunny.net"/>
        <link href="https://fonts.bunny.net/css?family=abhaya-libre:400|courier-prime:400" rel="stylesheet"/>

        <!-- Styles -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
              integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
              crossorigin="anonymous">
        <link rel="stylesheet" href="{% static '/css/main.css' %}"/>

        {% block link %}

        {% endblock %}

        <!-- Scripts -->
        <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
        <script defer src="{% static '/js/htmx.min.js' %}"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
                crossorigin="anonymous"></script>
        {% block script %}

        {% endblock %}
    {% endblock %}
</head>
<body>
<main>
    {% include 'navbar.html' %}
    <div style="display: contents">
        {% block content %}

        {% endblock %}
    </div>
    {% include 'footer.html' %}
</main>

<script>
	function setTheme(theme) {
		// Remove both theme classes from the html element
		document.documentElement.classList.remove('light', 'dark')
		document.documentElement.classList.add(theme)

		// Set Bootstrap's data-bs-theme attribute
		document.documentElement.setAttribute('data-bs-theme', theme)

		// Store the user's preference in localStorage (optional)
		localStorage.setItem('theme-preference', theme)
	}

	// Check for saved preference first
	const savedTheme = localStorage.getItem('theme-preference')

	if (savedTheme) {
		setTheme(savedTheme)
	} else {
		const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
		setTheme(systemTheme)
	}

	// Listen for system preference changes
	window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
		const newTheme = event.matches ? "dark" : "light"
		setTheme(newTheme)
	})
</script>
</body>
{% block extra_js %}
{% endblock %}
{% block extra_css %}
{% endblock %}
</html>
